<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan de Restructuration d'Entrepôt Interactif</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
        }
        .tab-btn {
            transition: all 0.3s ease;
        }
        .tab-btn.active {
            color: #2563eb;
            border-color: #2563eb;
            background-color: #eff6ff;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 350px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 320px;
            }
        }
        .technique-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .technique-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .raci-table th, .raci-table td {
            transition: background-color 0.2s ease-in-out;
        }
        .raci-table .highlight {
            background-color: #dbeafe;
        }
        .warehouse-diagram-box {
            border: 2px solid #9ca3af;
            background-color: #f9fafb;
            border-radius: 0.5rem;
            padding: 1rem;
            text-align: center;
        }
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border-left-color: #6366f1;
            animation: spin 1s ease infinite;
            display: none;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="antialiased">

    <div class="min-h-screen container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="text-center mb-8 md:mb-12">
            <h1 class="text-3xl md:text-4xl font-bold text-slate-800">Plan de Restructuration d'Entrepôt Interactif</h1>
            <p class="mt-2 text-lg text-slate-600">Un guide structuré pour la réorganisation de vos opérations d'entrepôt.</p>
             <p class="mt-4 text-sm font-medium text-red-600 border border-red-300 bg-red-50 p-3 rounded-lg">
                Les appels API sont maintenant sécurisés via un proxy backend Netlify. **Vous devez déployer le fichier <code>gemini-proxy.js</code>** séparément pour que les fonctionnalités d'IA fonctionnent.
            </p>
        </header>

        <nav class="mb-8">
            <div class="flex flex-col sm:flex-row justify-center border-b border-slate-300">
                <button data-target="intro" class="tab-btn active text-slate-600 font-semibold py-3 px-6 border-b-2 border-transparent hover:bg-slate-100">Introduction</button>
                <button data-target="phase1" class="tab-btn text-slate-600 font-semibold py-3 px-6 border-b-2 border-transparent hover:bg-slate-100">Phase 1: État Actuel</button>
                <button data-target="phase2" class="tab-btn text-slate-600 font-semibold py-3 px-6 border-b-2 border-transparent hover:bg-slate-100">Phase 2: État Futur</button>
                <button data-target="phase3" class="tab-btn text-slate-600 font-semibold py-3 px-6 border-b-2 border-transparent hover:bg-slate-100">Phase 3: Implémentation</button>
            </div>
        </nav>

        <main>
            <section id="intro" class="content-section active p-4 md:p-6 bg-white rounded-lg shadow-sm">
                <h2 class="text-2xl font-bold mb-4 text-slate-700">Objectif du Projet et Introduction</h2>
                <p class="text-slate-600 leading-relaxed">
                    Bienvenue dans le guide interactif pour la restructuration de vos équipes de gestion des stocks et d'entrepôt. L'objectif principal est de repenser la distribution des processus et des rôles pour optimiser l'efficacité et la responsabilisation à travers vos installations. Cette application vous guide à travers un plan d'analyse d'affaires structuré en trois phases.
                </p>
                <div class="mt-8">
                    <h3 class="text-xl font-semibold mb-4 text-slate-700">Aperçu des Entrepôts</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="warehouse-diagram-box">
                            <h4 class="font-bold text-lg">Entrepôt 1</h4>
                            <p class="text-slate-500">Matières Premières</p>
                            <div class="mt-4 space-y-2">
                                <span class="inline-block bg-blue-100 text-blue-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded-full">Accessoires de Cuisine</span>
                                <span class="inline-block bg-green-100 text-green-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded-full">Panneaux MDF</span>
                            </div>
                        </div>
                        <div class="warehouse-diagram-box">
                            <h4 class="font-bold text-lg">Entrepôt 2</h4>
                            <p class="text-slate-500">Appareils & Produits Finis</p>
                            <div class="mt-4 space-y-2">
                                <span class="inline-block bg-purple-100 text-purple-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded-full">Appareils de Cuisine</span>
                                <span class="inline-block bg-yellow-100 text-yellow-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded-full">Produit Final</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="phase1" class="content-section p-4 md:p-6 bg-white rounded-lg shadow-sm">
                <h2 class="text-2xl font-bold mb-2 text-slate-700">Phase 1: Analyse de l'État Actuel (As-Is)</h2>
                <p class="mb-6 text-slate-600">Comprendre le présent est crucial. Cette phase se concentre sur la cartographie des processus existants, l'identification des points de douleur et la documentation des rôles actuels.</p>
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="technique-card bg-slate-50 p-6 rounded-lg border border-slate-200">
                        <h3 class="font-bold text-lg mb-2 text-blue-700">Cartographie des Processus</h3>
                        <p class="text-slate-600">Créez des diagrammes des flux de travail entrants et sortants pour identifier les étapes et les responsabilités.</p>
                    </div>
                    <div class="technique-card bg-slate-50 p-6 rounded-lg border border-slate-200">
                        <h3 class="font-bold text-lg mb-2 text-blue-700">Entretiens avec les Parties Prenantes</h3>
                        <p class="text-slate-600">Menez des entretiens pour obtenir des informations qualitatives précieuses sur les tâches quotidiennes et les défis.</p>
                    </div>
                    <div class="technique-card bg-slate-50 p-6 rounded-lg border border-slate-200">
                        <h3 class="font-bold text-lg mb-2 text-blue-700">Analyse Documentaire</h3>
                        <p class="text-slate-600">Examinez les descriptions de rôle et les Procédures Opérationnelles Standard (POS) pour comprendre les processus formellement définis.</p>
                    </div>
                </div>
                <div class="mt-8 p-6 bg-slate-50 rounded-lg border border-slate-200">
                    <h3 class="font-bold text-lg mb-2 text-slate-700">✨ Assistant de Questions d'Entrevue</h3>
                    <p class="text-slate-600 text-sm mb-4">Obtenez une liste d'exemples de questions pour un rôle spécifique afin de faciliter vos entretiens.</p>
                    <textarea id="interview-role-input" class="w-full h-24 p-2 mb-4 rounded-lg border border-slate-300 text-sm" placeholder="Ex: Commis d'Entrepôt ou Gestionnaire d'Inventaire"></textarea>
                    <button id="generate-questions-btn" class="flex items-center justify-center w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                        Générer les Questions ✨
                        <div id="questions-loading" class="loading-spinner ml-2"></div>
                    </button>
                    <div id="questions-output" class="mt-4 p-4 bg-white rounded-lg border border-slate-200 text-sm whitespace-pre-wrap leading-relaxed"></div>
                </div>
            </section>

            <section id="phase2" class="content-section p-4 md:p-6 bg-white rounded-lg shadow-sm">
                <h2 class="text-2xl font-bold mb-2 text-slate-700">Phase 2: Définition de l'État Futur (To-Be)</h2>
                <p class="mb-6 text-slate-600">Cette phase se concentre sur la conception de la nouvelle structure optimisée, en définissant des rôles et des responsabilités claires pour rationaliser les opérations.</p>
                <div class="grid lg:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-slate-700">Techniques de Modélisation Clés</h3>
                        <div class="space-y-4">
                            <div class="technique-card bg-slate-50 p-4 rounded-lg border border-slate-200">
                                <h4 class="font-bold text-md text-blue-700">Ateliers d'Exigences</h4>
                                <p class="text-slate-600 text-sm">Réunir les parties prenantes pour convenir des fonctions de base et des compétences requises.</p>
                            </div>
                            <div class="technique-card bg-slate-50 p-4 rounded-lg border border-slate-200">
                                <h4 class="font-bold text-md text-blue-700">Définition des Rôles</h4>
                                <p class="text-slate-600 text-sm">Définir les nouveaux rôles et documenter leur objectif, leurs responsabilités et les compétences nécessaires.</p>
                            </div>
                            <div class="technique-card bg-slate-50 p-4 rounded-lg border border-slate-200">
                                <h4 class="font-bold text-md text-blue-700">Analyse de la Charge de Travail</h4>
                                <p class="text-slate-600 text-sm">Estimer le volume d'activités pour chaque nouveau rôle pour garantir une répartition équilibrée du travail.</p>
                            </div>
                        </div>
                         <div class="mt-6">
                            <h3 class="text-xl font-semibold mb-4 text-slate-700">Exemple: Analyse de la Charge de Travail</h3>
                            <div class="chart-container h-64 md:h-72">
                                <canvas id="workloadChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-slate-700">Exemple de Matrice RACI Interactive</h3>
                        <p class="text-slate-500 mb-4 text-sm">Passez la souris sur une tâche ou un rôle pour mettre en évidence les responsabilités (Responsable, Responsable en Chef, Consulté, Informé).</p>
                        <div class="overflow-x-auto">
                            <table class="raci-table w-full text-left border-collapse">
                                <thead>
                                    <tr>
                                        <th class="p-3 font-semibold uppercase bg-slate-100 border border-slate-300">Processus / Tâche</th>
                                        <th class="p-3 font-semibold uppercase bg-slate-100 border border-slate-300">Spécialiste Entrée</th>
                                        <th class="p-3 font-semibold uppercase bg-slate-100 border border-slate-300">Coordinateur Expédition</th>
                                        <th class="p-3 font-semibold uppercase bg-slate-100 border border-slate-300">Gestionnaire Entrepôt</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="hover:bg-slate-50">
                                        <td class="p-3 font-semibold border border-slate-200">Réception (MDF)</td>
                                        <td class="p-3 border border-slate-200">R</td>
                                        <td class="p-3 border border-slate-200">I</td>
                                        <td class="p-3 border border-slate-200">A, C</td>
                                    </tr>
                                    <tr class="hover:bg-slate-50">
                                        <td class="p-3 font-semibold border border-slate-200">Comptage Inventaire</td>
                                        <td class="p-3 border border-slate-200">R</td>
                                        <td class="p-3 border border-slate-200">C</td>
                                        <td class="p-3 border border-slate-200">A</td>
                                    </tr>
                                    <tr class="hover:bg-slate-50">
                                        <td class="p-3 font-semibold border border-slate-200">Préparation Commandes</td>
                                        <td class="p-3 border border-slate-200">I</td>
                                        <td class="p-3 border border-slate-200">R</td>
                                        <td class="p-3 border border-slate-200">A, C</td>
                                    </tr>
                                    <tr class="hover:bg-slate-50">
                                        <td class="p-3 border border-slate-200">Contrôle Qualité</td>
                                        <td class="p-3 border border-slate-200">R</td>
                                        <td class="p-3 border border-slate-200">R</td>
                                        <td class="p-3 border border-slate-200">A</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="mt-8 p-6 bg-slate-50 rounded-lg border border-slate-200">
                    <h3 class="font-bold text-lg mb-2 text-slate-700">✨ Assistant de Description de Rôle</h3>
                    <p class="text-slate-600 text-sm mb-4">Entrez un nouveau titre de rôle et quelques responsabilités clés pour générer une description complète.</p>
                    <textarea id="role-desc-input" class="w-full h-24 p-2 mb-4 rounded-lg border border-slate-300 text-sm" placeholder="Ex: Gestionnaire Logistique d'Entrée, supervise l'inventaire et le personnel."></textarea>
                    <button id="generate-role-desc-btn" class="flex items-center justify-center w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                        Générer la Description de Rôle ✨
                        <div id="role-desc-loading" class="loading-spinner ml-2"></div>
                    </button>
                    <div id="role-desc-output" class="mt-4 p-4 bg-white rounded-lg border border-slate-200 text-sm whitespace-pre-wrap leading-relaxed"></div>
                </div>
            </section>

            <section id="phase3" class="content-section p-4 md:p-6 bg-white rounded-lg shadow-sm">
                <h2 class="text-2xl font-bold mb-2 text-slate-700">Phase 3: Implémentation et Suivi</h2>
                <p class="mb-6 text-slate-600">Cette phase se concentre sur la gestion de la transition et l'établissement de métriques pour suivre le succès. Un plan bien exécuté assure l'adoption de la nouvelle structure.</p>
                <div class="grid lg:grid-cols-2 gap-8 items-start">
                     <div>
                        <h3 class="text-xl font-semibold mb-4 text-slate-700">Techniques d'Implémentation</h3>
                        <div class="space-y-4">
                           <div class="technique-card bg-slate-50 p-6 rounded-lg border border-slate-200">
                                <h3 class="font-bold text-lg mb-2 text-blue-700">Plan de Communication</h3>
                                <p class="text-slate-600">Élaborez une stratégie claire pour communiquer les changements à tous les membres de l'équipe, en expliquant la raison d'être, les avantages et les délais.</p>
                            </div>
                            <div class="technique-card bg-slate-50 p-6 rounded-lg border border-slate-200">
                                <h3 class="font-bold text-lg mb-2 text-blue-700">Plan de Formation</h3>
                                <p class="text-slate-600">Créez et offrez des sessions de formation pour doter les membres de l'équipe des compétences nécessaires pour leurs nouveaux rôles.</p>
                            </div>
                        </div>
                    </div>
                    <div>
                         <h3 class="text-xl font-semibold mb-4 text-slate-700">Tableau de Bord des Métriques</h3>
                         <p class="text-slate-500 mb-4 text-sm">Établissez des indicateurs clés de performance (KPI) pour mesurer le succès. Ce tableau de bord montre des métriques cruciales à surveiller.</p>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                            <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 text-center">
                                <h4 class="font-semibold text-slate-700">Précision de l'Inventaire</h4>
                                <div class="chart-container h-48 sm:h-56">
                                    <canvas id="accuracyChart"></canvas>
                                </div>
                            </div>
                             <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 text-center">
                                <h4 class="font-semibold text-slate-700">Temps de Cycle (Jours)</h4>
                                <div class="chart-container h-48 sm:h-56">
                                    <canvas id="cycleTimeChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt-8 p-6 bg-slate-50 rounded-lg border border-slate-200">
                    <h3 class="font-bold text-lg mb-2 text-slate-700">✨ Assistant de Communication</h3>
                    <p class="text-slate-600 text-sm mb-4">Rédigez un message professionnel pour annoncer les changements à l'équipe.</p>
                    <textarea id="comm-plan-input" class="w-full h-24 p-2 mb-4 rounded-lg border border-slate-300 text-sm" placeholder="Ex: Expliquer les nouveaux rôles et comment cela améliore l'efficacité. Public cible: Tout le personnel de l'entrepôt."></textarea>
                    <button id="generate-comm-plan-btn" class="flex items-center justify-center w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                        Rédiger le Plan de Communication ✨
                        <div id="comm-plan-loading" class="loading-spinner ml-2"></div>
                    </button>
                    <div id="comm-plan-output" class="mt-4 p-4 bg-white rounded-lg border border-slate-200 text-sm whitespace-pre-wrap leading-relaxed"></div>
                </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const tabs = document.querySelectorAll('.tab-btn');
            const contentSections = document.querySelectorAll('.content-section');
            // Le frontend appelle le point de terminaison relatif qui est géré par la fonction backend sécurisée
            const PROXY_ENDPOINT = '/api/gemini-proxy'; 

            const interviewRoleInput = document.getElementById('interview-role-input');
            const generateQuestionsBtn = document.getElementById('generate-questions-btn');
            const questionsOutput = document.getElementById('questions-output');
            const questionsLoading = document.getElementById('questions-loading');

            const roleDescInput = document.getElementById('role-desc-input');
            const generateRoleDescBtn = document.getElementById('generate-role-desc-btn');
            const roleDescOutput = document.getElementById('role-desc-output');
            const roleDescLoading = document.getElementById('role-desc-loading');

            const commPlanInput = document.getElementById('comm-plan-input');
            const generateCommPlanBtn = document.getElementById('generate-comm-plan-btn');
            const commPlanOutput = document.getElementById('comm-plan-output');
            const commPlanLoading = document.getElementById('comm-plan-loading');

            const showLoading = (loader) => loader.style.display = 'block';
            const hideLoading = (loader) => loader.style.display = 'none';

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const target = tab.dataset.target;
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    contentSections.forEach(section => {
                        if (section.id === target) {
                            section.classList.add('active');
                        } else {
                            section.classList.remove('active');
                        }
                    });
                });
            });

            const raciTable = document.querySelector('.raci-table');
            if(raciTable) {
                const cells = raciTable.querySelectorAll('td, th');
                cells.forEach(cell => {
                    cell.addEventListener('mouseover', () => {
                        const colIndex = cell.cellIndex;
                        const rowIndex = cell.parentElement.rowIndex;
                        const rowCells = raciTable.rows[rowIndex].cells;
                        for(let i=0; i<rowCells.length; i++) {
                            rowCells[i].classList.add('highlight');
                        }
                        for(let i=0; i<raciTable.rows.length; i++) {
                            raciTable.rows[i].cells[colIndex].classList.add('highlight');
                        }
                    });
                     cell.addEventListener('mouseout', () => {
                        cells.forEach(c => c.classList.remove('highlight'));
                    });
                });
            }
            
            // Configuration des options des graphiques
            const chartOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 15,
                            font: {
                                size: 12
                            }
                        }
                    }
                },
                scales: {
                     x: {
                        ticks: {
                            font: {
                                size: 10
                            },
                            autoSkip: false,
                            maxRotation: 0,
                            minRotation: 0
                        },
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        beginAtZero: true,
                         grid: {
                            color: '#e2e8f0'
                        },
                        ticks: {
                             font: {
                                size: 10
                            }
                        }
                    }
                }
            };

            // Graphique de Charge de Travail
            const workloadCtx = document.getElementById('workloadChart');
            if (workloadCtx) {
                new Chart(workloadCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Spécialiste Entrée', 'Coordinateur Expédition', 'Gestionnaire Entrepôt'],
                        datasets: [{
                            label: 'Heures Hebdomadaires Estimées',
                            data: [38, 40, 35],
                            backgroundColor: ['#60a5fa', '#34d399', '#facc15'],
                            borderColor: ['#3b82f6', '#10b981', '#f59e0b'],
                            borderWidth: 1
                        }]
                    },
                    options: chartOptions
                });
            }

            // Graphique de Précision de l'Inventaire
            const accuracyCtx = document.getElementById('accuracyChart');
            if (accuracyCtx) {
                new Chart(accuracyCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Précis', 'Erreur'],
                        datasets: [{
                            label: 'Précision de l\'Inventaire',
                            data: [98.5, 1.5],
                            backgroundColor: ['#34d399', '#f87171'],
                            hoverOffset: 4
                        }]
                    },
                     options: {
                        responsive: true,
                        maintainAspectRatio: false,
                         plugins: {
                            legend: {
                                display: false
                            },
                             tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${context.label}: ${context.raw}%`;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Graphique du Temps de Cycle
            const cycleTimeCtx = document.getElementById('cycleTimeChart');
            if (cycleTimeCtx) {
                 new Chart(cycleTimeCtx, {
                    type: 'line',
                    data: {
                        labels: ['T1', 'T2', 'T3', 'T4'],
                        datasets: [{
                            label: 'Temps de Cycle de Commande',
                            data: [2.5, 2.2, 1.9, 1.8],
                            fill: false,
                            borderColor: '#3b82f6',
                            tension: 0.1
                        }]
                    },
                    options: {
                         responsive: true,
                        maintainAspectRatio: false,
                         plugins: {
                             legend: {
                                display: false,
                            }
                         },
                         scales: {
                            y: {
                                beginAtZero: false,
                                title: { display: true, text: 'Jours' }
                            }
                         }
                    }
                });
            }


            // --- FONCTION D'APPEL API MISE À JOUR (Appel du Proxy) ---
            const callApi = async (userPrompt, outputElement, loadingElement, systemPrompt) => {
                showLoading(loadingElement);
                outputElement.textContent = 'Génération de contenu...';
                let retries = 3;
                while (retries > 0) {
                    try {
                        // Le payload envoie les invites à notre proxy sécurisé
                        const payload = { userPrompt, systemPrompt };
                        
                        const response = await fetch(PROXY_ENDPOINT, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (!response.ok) {
                             // Gérer l'erreur du proxy
                            const errorData = await response.json();
                            throw new Error(`Erreur du proxy: ${response.status} - ${errorData.error || 'Erreur inconnue'}`);
                        }
                        
                        const result = await response.json();
                        const generatedText = result.text; // Attente de { text: "..." } du proxy
                        
                        if (generatedText) {
                            outputElement.textContent = generatedText;
                            break;
                        } else {
                             throw new Error('Réponse vide reçue du proxy.');
                        }
                    } catch (error) {
                        console.error("Erreur d'appel API:", error);
                        retries--;
                        if (retries === 0) {
                           outputElement.textContent = 'Échec de la génération de contenu. Vérifiez la console pour les erreurs de déploiement du proxy.';
                        } else {
                            await new Promise(res => setTimeout(res, 1000 * (4 - retries)));
                        }
                    }
                }
                hideLoading(loadingElement);
            };

            // --- Écouteurs d'événements (Utilisation de la nouvelle fonction callApi) ---

            generateQuestionsBtn.addEventListener('click', () => {
                const role = interviewRoleInput.value.trim();
                if (role) {
                    const systemPrompt = "Vous êtes un expert en analyse commerciale et consultant en ressources humaines. Votre tâche est de générer des questions d'entrevue pertinentes pour un projet de restructuration de la gestion d'entrepôt et d'inventaire.";
                    const userPrompt = `Générez une liste de questions d'entrevue pour une partie prenante ayant le rôle de "${role}". Les questions doivent aider à comprendre leurs responsabilités actuelles, leurs défis et leurs idées pour une nouvelle structure organisationnelle. Présentez les questions sous forme de liste numérotée.`;
                    callApi(userPrompt, questionsOutput, questionsLoading, systemPrompt);
                } else {
                    questionsOutput.textContent = 'Veuillez entrer un rôle pour générer les questions.';
                }
            });

            generateRoleDescBtn.addEventListener('click', () => {
                const roleDescription = roleDescInput.value.trim();
                if (roleDescription) {
                    const systemPrompt = "Vous êtes un expert en conception organisationnelle et RH. Votre tâche est de rédiger une description de rôle détaillée et professionnelle pour un poste de gestion d'entrepôt.";
                    const userPrompt = `Rédigez une description de rôle complète basée sur les éléments suivants : "${roleDescription}". Incluez des sections pour un résumé, les responsabilités clés, les qualifications requises et la structure hiérarchique.`;
                    callApi(userPrompt, roleDescOutput, roleDescLoading, systemPrompt);
                } else {
                    roleDescOutput.textContent = 'Veuillez entrer une description de rôle pour générer un document.';
                }
            });

            generateCommPlanBtn.addEventListener('click', () => {
                const commPlanDetails = commPlanInput.value.trim();
                if (commPlanDetails) {
                    const systemPrompt = "Vous êtes un professionnel expérimenté en communication d'entreprise. Votre tâche est de rédiger une note de service interne claire et empathique aux employés concernant un changement organisationnel.";
                    const userPrompt = `Rédigez un message de communication à l'équipe concernant une restructuration. Le message doit être basé sur les détails suivants : "${commPlanDetails}". Le ton doit être professionnel, rassurant et clair sur les avantages du changement.`;
                    callApi(userPrompt, commPlanOutput, commPlanLoading, systemPrompt);
                } else {
                    commPlanOutput.textContent = 'Veuillez entrer des détails pour le plan de communication.';
                }
            });
        });
    </script>
</body>
</html>
